<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SFH8SW31QP"></script>
  <script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-SFH8SW31QP');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <title>Justin Leahy - Map</title>
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.4.1/mapbox-gl.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css" type="text/css" />
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"></script>
  <script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-markercluster/v1.4.0/mapbox-gl-markercluster.min.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-markercluster/v1.4.0/mapbox-gl-markercluster.css" rel="stylesheet" />
  <style>
    .mapboxgl-popup-content {
      color: black;
    }

    #search-input {
      position: absolute;
      top: 10px;
      left: 10px;
      z-index: 1;
      width: 300px;
      padding: 10px;
      font-size: 16px;
    }

    .mapboxgl-popup {
      max-width: 200px;
      font-family: Arial, sans-serif;
    }

    .mapboxgl-popup-content {
      padding: 10px;
    }

    .mapboxgl-popup-content h3 {
      margin-top: 0;
      margin-bottom: 5px;
    }

    .mapboxgl-popup-content p {
      margin-top: 0;
      margin-bottom: 0;
    }
  </style>
</head>

<body>

  <header>
    <nav>
      <div class="header-left">
        <div class="logo">
          <a href="index.html">Justin Leahy</a>
        </div>
      </div>
      <div class="header-right">
        <ul class="menu">
          <li><a href="index.html">Home</a></li>
          <li><a>Portfolio</a>
            <ul class="dropdown">
              <li><a href="landscape.html">Landscape</a></li>
              <li><a href="portrait.html">Portrait</a></li>
              <li><a href="wildlife.html">Wildlife</a></li>
            </ul>
          </li>
          <li><a href="about.html">About</a></li>
          <li><a href="map.html">Map</a></li>
        </ul>
      </div>
    </nav>
  </header>

  <main id="map-page">
    <!-- Map page content -->
    <h1>Where Friends Attend College</h1>
    <!-- Rest of the map page content -->
    <div id="map"></div>
    <input id="search-input" type="text" placeholder="Search for a location" />

    <div id="info-window" class="mapboxgl-popup">
      <div class="mapboxgl-popup-content">
        <h3 id="info-window-title"></h3>
        <p id="info-window-description"></p>
      </div>
    </div>

    <div id="filters">
      <h3>Filter by:</h3>
      <label>
        <input type="checkbox" id="filter1" />
        Filter 1
      </label>
      <label>
        <input type="checkbox" id="filter2" />
        Filter 2
      </label>
      <label>
        <input type="checkbox" id="filter3" />
        Filter 3
      </label>
    </div>

    <script>mapboxgl.accessToken = 'pk.eyJ1IjoianVzdGxlYWh5IiwiYSI6ImNsazJweDE5MjAyeGgzcnRqbGI4dzZuNzgifQ.gx_MnEM5M8x53NO0m1ZbdA';



     var pinpoints = [
  {
    position: { lat: 42.374595, lng:-71.116253 },
    caption: '(Harvard University) Jahrel Noble, Diane Sun',
    link: 'joshuatree.html' // Replace with the link to the page with photos taken at this location
  },{
    position: { lat: 29.461279, lng: -98.483842 },
    caption: '(Trinity University) Aidan Walker, Natalie Saldana',
    link: 'canadianrockies.html' // Replace with the link to the page with photos taken at this location
  },{
    position: { lat: 42.454360, lng: -76.475026 },
    caption: '(Cornell University) Levi Chen',
    link: 'blueridge.html' // Replace with the link to the page with photos taken at this location
  },{
    name: 'University of California, San Diego (UCSD)',
    position: { lat: 32.880060, lng: -117.234013 },
    caption: '(UCSD)',
    link: 'ucsd.html'
  }, {
    name: 'Carnegie Mellon University',
    position: { lat: 40.443244, lng: -79.942517 },
    caption: '(Carnegie Mellon University)',
    link: 'cmu.html'
  },  {
    name: 'University of Washington',
    position: { lat: 47.656968, lng: -122.308401 },
    caption: '(University of Washington)',
    link: 'uwashington.html'
  },
  {
    name: 'New York University',
    position: { lat: 40.729253, lng: -73.996253 },
    caption: '(New York University)',
    link: 'nyu.html'
  },
  {
    name: 'University of Wisconsin-Madison',
    position: { lat: 43.075237, lng: -89.404387 },
    caption: '(University of Wisconsin-Madison)',
    link: 'uwisconsin.html'
  },
  {
    name: 'University of Illinois at Urbana-Champaign',
    position: { lat: 40.102000, lng: -88.227168 },
    caption: '(University of Illinois at Urbana-Champaign)',
    link: 'illinois.html'
  },
  {
    name: 'University of California, Santa Barbara (UCSB)',
    position: { lat: 34.414092, lng: -119.844437 },
    caption: '(UCSB)',
    link: 'ucsb.html'
  },
  {
    name: 'University of Florida',
    position: { lat: 29.643632, lng: -82.354930 },
    caption: '(University of Florida)',
    link: 'uflorida.html'
  },
  {
    name: 'University of California, Davis (UC Davis)',
    position: { lat: 38.537323, lng: -121.753283 },
    caption: '(UC Davis)',
    link: 'ucdavis.html'
  },
  {
    name: 'University of California, Irvine (UCI)',
    position: { lat: 33.640495, lng: -117.844296 },
    caption: '(UCI)',
    link: 'uci.html'
  },
  {
    name: 'University of California, Santa Cruz (UCSC)',
    position: { lat: 36.991469, lng: -122.058371 },
    caption: '(UCSC)',
    link: 'ucsc.html'
  },
  {
    name: 'Boston University',
    position: { lat: 42.349534, lng: -71.102487 },
    caption: '(Boston University)',
    link: 'bu.html'
  },
  {
    name: 'Pennsylvania State University',
    position: { lat: 40.798213, lng: -77.859908 },
    caption: '(Pennsylvania State University)',
    link: 'psu.html'
  },
  {
    name: 'University of Maryland, College Park',
    position: { lat: 38.986918, lng: -76.942554 },
    caption: '(University of Maryland, College Park)',
    link: 'umd.html'
  },
  {
    name: 'University of California, Riverside (UCR)',
    position: { lat: 33.973951, lng: -117.328079 },
    caption: '(UCR)',
    link: 'ucr.html'
  },
  {
    name: 'University of Minnesota, Twin Cities',
    position: { lat: 44.972606, lng: -93.235410 },
    caption: '(University of Minnesota, Twin Cities)',
    link: 'uminn.html'
  },
  {
    name: 'University of Virginia (UVA)',
    position: { lat: 38.033555, lng: -78.507977 },
    caption: '(University of Virginia)',
    link: 'uva.html'
  },
  {
    name: 'Ohio State University',
    position: { lat: 40.005709, lng: -83.029248 },
    caption: '(Ohio State University)',
    link: 'osu.html'
  },
  {
    name: 'Purdue University',
    position: { lat: 40.424141, lng: -86.921381 },
    caption: '(Purdue University)',
    link: 'purdue.html'
  },
  {
    name: 'University of Miami',
    position: { lat: 25.717987, lng: -80.278448 },
    caption: '(University of Miami)',
    link: 'miami.html'
  },
  {
    name: 'Stanford University',
    position: { lat: 37.427475, lng: -122.169716 },
    caption: '(Stanford University)',
    link: 'stanford.html'
  },
  {
    name: 'Massachusetts Institute of Technology (MIT)',
    position: { lat: 42.360091, lng: -71.094160 },
    caption: '(Massachusetts Institute of Technology)',
    link: 'mit.html'
  },
  {
    name: 'California Institute of Technology (Caltech)',
    position: { lat: 34.137918, lng: -118.125737 },
    caption: '(California Institute of Technology)',
    link: 'caltech.html'
  },
  {
    name: 'University of Chicago',
    position: { lat: 41.789660, lng: -87.599639 },
    caption: '(University of Chicago)',
    link: 'uchicago.html'
  },
  {
    name: 'Princeton University',
    position: { lat: 40.348720, lng: -74.659056 },
    caption: '(Princeton University)',
    link: 'princeton.html'
  },
  {
    name: 'Yale University',
    position: { lat: 41.316324, lng: -72.922343 },
    caption: '(Yale University)',
    link: 'yale.html'
  },
  {
    name: 'Columbia University',
    position: { lat: 40.807535, lng: -73.962572 },
    caption: '(Columbia University)',
    link: 'columbia.html'
  },
  {
    name: 'University of Pennsylvania',
    position: { lat: 39.952583, lng: -75.193628 },
    caption: '(University of Pennsylvania)',
    link: 'upenn.html'
  },
  {
    name: 'University of California, Berkeley (UC Berkeley)',
    position: { lat: 37.871593, lng: -122.260115 },
    caption: '(UC Berkeley)',
    link: 'berkeley.html'
  },
  {
    name: 'University of Texas at Austin',
    position: { lat: 30.284918, lng: -97.734056 },
    caption: '(University of Texas at Austin)',
    link: 'utexas.html'
  },
  {
    name: 'Texas A&M University',
    position: { lat: 30.613450, lng: -96.341267 },
    caption: '(Texas A&M University)',
    link: 'tamu.html'
  },
  {
    name: 'Rice University',
    position: { lat: 29.716633, lng: -95.402177 },
    caption: '(Rice University)',
    link: 'rice.html'
  },
  {
    name: 'University of Houston',
    position: { lat: 29.719949, lng: -95.342233 },
    caption: '(University of Houston)',
    link: 'uhouston.html'
  },
  {
    name: 'Southern Methodist University (SMU)',
    position: { lat: 32.841696, lng: -96.784670 },
    caption: '(Southern Methodist University)',
    link: 'smu.html'
  },
  {
    name: 'Texas Christian University (TCU)',
    position: { lat: 32.709715, lng: -97.364227 },
    caption: '(Texas Christian University)',
    link: 'tcu.html'
  },
  {
    name: 'Baylor University',
    position: { lat: 31.546909, lng: -97.121379 },
    caption: '(Baylor University)',
    link: 'baylor.html'
  },
  {
    name: 'Texas Tech University',
    position: { lat: 33.584091, lng: -101.878078 },
    caption: '(Texas Tech University)',
    link: 'texastech.html'
  },
  {
    name: 'University of North Texas',
    position: { lat: 33.210876, lng: -97.148037 },
    caption: '(University of North Texas)',
    link: 'unt.html'
  },
  {
    name: 'Texas State University',
    position: { lat: 29.888501, lng: -97.936507 },
    caption: '(Texas State University)',
    link: 'txstate.html'
  },

  // Additional Universities
  {
    name: 'University of Virginia (UVA)',
    position: { lat: 38.033555, lng: -78.507977 },
    caption: '(University of Virginia)',
    link: 'uva.html'
  },
  {
    name: 'Occidental College',
    position: { lat: 34.127844, lng: -118.210652 },
    caption: '(Occidental College)',
    link: 'occidental.html'
  },
  {
    name: 'University of Southern California (USC)',
    position: { lat: 34.021866, lng: -118.286135 },
    caption: '(University of Southern California)',
    link: 'usc.html'
  },
  {
    name: 'University of California, Los Angeles (UCLA)',
    position: { lat: 34.068921, lng: -118.445181 },
    caption: '(UCLA)',
    link: 'ucla.html'
  },

  // Top 20 Liberal Arts Colleges
  {
    name: 'Williams College',
    position: { lat: 42.712020, lng: -73.203183 },
    caption: '(Williams College)',
    link: 'williams.html'
  },
  {
    name: 'Amherst College',
    position: { lat: 42.373611, lng: -72.524724 },
    caption: '(Amherst College)',
    link: 'amherst.html'
  },
  {
    name: 'Swarthmore College',
    position: { lat: 39.905437, lng: -75.354824 },
    caption: '(Swarthmore College)',
    link: 'swarthmore.html'
  },
  {
    name: 'Wellesley College',
    position: { lat: 42.293573, lng: -71.305589 },
    caption: '(Wellesley College)',
    link: 'wellesley.html'
  },
  {
    name: 'Bowdoin College',
    position: { lat: 43.907563, lng: -69.963996 },
    caption: '(Bowdoin College)',
    link: 'bowdoin.html'
  },
  {
    name: 'Carleton College',
    position: { lat: 44.461493, lng: -93.155975 },
    caption: '(Carleton College)',
    link: 'carleton.html'
  },
  {
    name: 'Middlebury College',
    position: { lat: 44.015645, lng: -73.167743 },
    caption: '(Middlebury College)',
    link: 'middlebury.html'
  },
  {
    name: 'Pomona College',
    position: { lat: 34.097319, lng: -117.712642 },
    caption: '(Pomona College)',
    link: 'pomona.html'
  },
  {
    name: 'Claremont McKenna College',
    position: { lat: 34.101579, lng: -117.707732 },
    caption: '(Claremont McKenna College)',
    link: 'cmc.html'
  },
  {
    name: 'Harvey Mudd College',
    position: { lat: 34.106439, lng: -117.711784 },
    caption: '(Harvey Mudd College)',
    link: 'hmc.html'
  },{
    name: 'Washington and Lee University',
    position: { lat: 37.789693, lng: -79.441349 },
    caption: '(Washington and Lee University)',
    link: 'wlu.html'
  },
  {
    name: 'Davidson College',
    position: { lat: 35.502264, lng: -80.845406 },
    caption: '(Davidson College)',
    link: 'davidson.html'
  }
      
];
var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11',
        center: [-71.116253, 42.374595],
        zoom: 10
      });

      var popup = new mapboxgl.Popup({
        closeButton: false,
        closeOnClick: false
      });

      var infoWindow = new mapboxgl.Popup({
        closeButton: false,
        closeOnClick: false,
        anchor: 'top',
        offset: [0, -20]
      });

      var geocoder = new MapboxGeocoder({
        accessToken: mapboxgl.accessToken,
        mapboxgl: mapboxgl
      });

      map.on('load', function () {
        map.addSource('markers', {
          type: 'geojson',
          data: {
            type: 'FeatureCollection',
            features: pinpoints.map(function (pinpoint) {
              return {
                type: 'Feature',
                geometry: {
                  type: 'Point',
                  coordinates: [pinpoint.position.lng, pinpoint.position.lat]
                },
                properties: {
                  caption: pinpoint.caption,
                  link: pinpoint.link
                }
              };
            })
          },
          cluster: true,
          clusterRadius: 50
        });

        map.addLayer({
          id: 'clusters',
          type: 'circle',
          source: 'markers',
          filter: ['has', 'point_count'],
          paint: {
            'circle-color': '#FF5722',
            'circle-radius': 18
          }
        });

        map.addLayer({
          id: 'cluster-count',
          type: 'symbol',
          source: 'markers',
          filter: ['has', 'point_count'],
          layout: {
            'text-field': '{point_count_abbreviated}',
            'text-size': 12
          },
          paint: {
            'text-color': '#FFFFFF'
          }
        });

        map.addLayer({
          id: 'unclustered-point',
          type: 'circle',
          source: 'markers',
          filter: ['!', ['has', 'point_count']],
          paint: {
            'circle-color': '#FF9800',
            'circle-radius': 10,
            'circle-stroke-width': 2,
            'circle-stroke-color': '#FFFFFF'
          }
        });

        map.on('mouseenter', 'clusters', function () {
          map.getCanvas().style.cursor = 'pointer';
        });

        map.on('mouseleave', 'clusters', function () {
          map.getCanvas().style.cursor = '';
        });

        map.on('click', 'clusters', function (e) {
          var features = map.queryRenderedFeatures(e.point, {
            layers: ['clusters']
          });
          var clusterId = features[0].properties.cluster_id;
          map.getSource('markers').getClusterExpansionZoom(clusterId, function (err, zoom) {
            if (err) return;

            map.easeTo({
              center: features[0].geometry.coordinates,
              zoom: zoom
            });
          });
        });

        map.on('click', 'unclustered-point', function (e) {
          var feature = e.features[0];
          var coordinates = feature.geometry.coordinates.slice();
          var caption = feature.properties.caption;
          var link = feature.properties.link;

          infoWindow.setLngLat(coordinates)
            .setHTML('<h3>' + caption + '</h3><p>Description here</p>')
            .addTo(map);
        });

        map.on('mouseenter', 'unclustered-point', function () {
          map.getCanvas().style.cursor = 'pointer';
        });

        map.on('mouseleave', 'unclustered-point', function () {
          map.getCanvas().style.cursor = '';
        });

        map.addControl(geocoder);

        geocoder.on('result', function (e) {
          var result = e.result;
          map.flyTo({
            center: result.geometry.coordinates,
            zoom: 12
          });
        });

        // Center the map on a combination of all points
        var bounds = new mapboxgl.LngLatBounds();
        pinpoints.forEach(function (pinpoint) {
          bounds.extend(pinpoint.position.lng, pinpoint.position.lat);
        });
        map.fitBounds(bounds, { padding: 50 });

        // Fit all points into the loaded map
        map.setMaxBounds(bounds);

        // Update the map when filters are changed
        var filters = document.querySelectorAll('#filters input[type="checkbox"]');
        filters.forEach(function (filter) {
          filter.addEventListener('change', function () {
            var activeFilters = Array.from(filters).filter(function (filter) {
              return filter.checked;
            }).map(function (filter) {
              return filter.id;
            });

            var filteredFeatures = pinpoints.filter(function (pinpoint) {
              // Customize the conditions based on your requirements and checkbox IDs
              if (activeFilters.includes('filter1') && !pinpoint.meetsFilter1) {
                return false;
              }
              if (activeFilters.includes('filter2') && !pinpoint.meetsFilter2) {
                return false;
              }
              if (activeFilters.includes('filter3') && !pinpoint.meetsFilter3) {
                return false;
              }
              return true;
            });

            map.getSource('markers').setData({
              type: 'FeatureCollection',
              features: filteredFeatures.map(function (pinpoint) {
                return {
                  type: 'Feature',
                  geometry: {
                    type: 'Point',
                    coordinates: [pinpoint.position.lng, pinpoint.position.lat]
                  },
                  properties: {
                    caption: pinpoint.caption,
                    link: pinpoint.link
                  }
                };
              })
            });
          });
        });
      });
    </script>
  </main>

  <footer>
    <p>© Justin Leahy 2023 | JPL</p>
  </footer>

</body>

</html>
